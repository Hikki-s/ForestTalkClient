(self.webpackChunkForestTalkClient=self.webpackChunkForestTalkClient||[]).push([[844],{7844:(y,d,f)=>{"use strict";f.r(d),f.d(d,{newsFeedRoutes:()=>N});var E=f(177),g=f(3490),n=f(4438);let r=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275cmp=n.VBU({type:e,selectors:[["app-news-feed"]],standalone:!0,features:[n.aNF],decls:4,vars:0,template:function(a,$){1&a&&(n.j41(0,"div")(1,"h1"),n.EFF(2,"News Feed"),n.k0s(),n.nrm(3,"router-outlet"),n.k0s())},dependencies:[E.MD,g.n3],changeDetection:0})}return e})();var _=f(1413),M=f(1562),u=f(4412),p=f(9437),o=f(7673),c=f(6354);const t="http://localhost:3000",i={AUTH_REGISTER:`${t}/auth/register`,AUTH_LOGIN:`${t}/auth/login`,AUTH_REFRESH:`${t}/auth/refresh`,AUTH_LOGOUT:`${t}/auth/logout`,GET_USER_BY_ID:e=>`${t}/users/${e}`,CREATE_USER:`${t}/users`,UPDATE_USER_BY_ID:e=>`${t}/users/${e}`,DELETE_USER_BY_ID:e=>`${t}/users/${e}`,GET_USER_GALLERY:e=>`${t}/users/${e}/gallery`,ADD_IMAGE_TO_GALLERY:e=>`${t}/users/${e}/gallery`,DELETE_IMAGE_FROM_GALLERY:(e,C)=>`${t}/users/${e}/gallery/${C}`,GET_PROFILE_SETTINGS:e=>`${t}/users/${e}/profile`,UPDATE_PROFILE_SETTINGS:e=>`${t}/users/${e}/profile`,GET_FRIENDS_LIST:e=>`${t}/users/${e}/friends`,ADD_FRIEND:e=>`${t}/users/${e}/friends`,UPDATE_FRIEND_STATUS:(e,C)=>`${t}/users/${e}/friends/${C}`,GET_POST_BY_ID:e=>`${t}/posts/${e}`,CREATE_POST:`${t}/posts`,UPDATE_POST:e=>`${t}/posts/${e}`,DELETE_POST:e=>`${t}/posts/${e}`,ADD_MEDIA_TO_POST:e=>`${t}/posts/${e}/media`,DELETE_MEDIA_FROM_POST:(e,C)=>`${t}/posts/${e}/media/${C}`,GET_POST_COMMENTS:e=>`${t}/posts/${e}/comments`,ADD_COMMENT_TO_POST:e=>`${t}/posts/${e}/comments`,UPDATE_COMMENT:e=>`${t}/comments/${e}`,DELETE_COMMENT:e=>`${t}/comments/${e}`,ADD_LIKE_TO_POST:e=>`${t}/posts/${e}/likes`,DELETE_LIKE_FROM_POST:(e,C)=>`${t}/posts/${e}/likes/${C}`,GET_COMMUNITIES:`${t}/communities`,GET_COMMUNITY_BY_ID:e=>`${t}/communities/${e}`,CREATE_COMMUNITY:`${t}/communities`,UPDATE_COMMUNITY_BY_ID:e=>`${t}/communities/${e}`,DELETE_COMMUNITY_BY_ID:e=>`${t}/communities/${e}`,GET_COMMUNITY_MEMBERS:e=>`${t}/communities/${e}/members`,ADD_MEMBER_TO_COMMUNITY:e=>`${t}/communities/${e}/members`,UPDATE_MEMBER_ROLE:(e,C)=>`${t}/communities/${e}/members/${C}`,REMOVE_MEMBER_FROM_COMMUNITY:(e,C)=>`${t}/communities/${e}/members/${C}`,GET_COMMUNITY_GALLERY:e=>`${t}/communities/${e}/gallery`,ADD_IMAGE_TO_COMMUNITY_GALLERY:e=>`${t}/communities/${e}/gallery`,DELETE_IMAGE_FROM_COMMUNITY_GALLERY:(e,C)=>`${t}/communities/${e}/gallery/${C}`,GET_COMMUNITY_SETTINGS:e=>`${t}/communities/${e}/settings`,UPDATE_COMMUNITY_SETTINGS:e=>`${t}/communities/${e}/settings`,GET_FEED:`${t}/feed`,GET_FEED_BY_ID:e=>`${t}/feed/${e}`};var l=f(282),T=function(e){return e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e}(T||{});const D=(e,C)=>({message:"string"==typeof e?e:JSON.stringify(e,null,2),logLevel:C});let F=(()=>{class e{d;i;w;e;constructor(){this.d=(0,l.debug)("api:debug"),this.i=(0,l.debug)("api:info"),this.w=(0,l.debug)("api:warn"),this.e=(0,l.debug)("api:error")}debug(s){this.d("%j",D(s,T.DEBUG))}info(s){this.i("%j",D(s,T.INFO))}warn(s){this.w("%j",D(s,T.WARN))}error(s){this.e("%j",D(s,T.ERROR))}enableLogging(s){l.debug.enable(`${s.toLowerCase()}:*`)}disableLogging(){l.debug.disable()}static \u0275fac=function(a){return new(a||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),h=(()=>{class e{http=(0,n.WQX)(M.Qq);logger=(0,n.WQX)(F);postsSubject=new u.t([]);posts$=this.postsSubject.asObservable();getFeed(s,a){this.http.get(i.GET_FEED,{params:{offset:s,limit:a}}).pipe((0,c.T)(O=>{const P=this.postsSubject.getValue();return this.postsSubject.next([...P,...O]),O}),(0,p.W)(O=>(this.logger.error(`Error fetching posts: ${O}`),(0,o.of)([])))).subscribe()}static \u0275fac=function(a){return new(a||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const w=(e,C)=>C.id;function v(e,C){if(1&e&&(n.j41(0,"div",1)(1,"div",2)(2,"div",3),n.EFF(3),n.k0s(),n.j41(4,"div",3),n.EFF(5),n.k0s()(),n.j41(6,"p"),n.EFF(7),n.k0s()()),2&e){const s=C.$implicit;n.R7$(3),n.JRh(s.owner.ownerName),n.R7$(2),n.JRh(s.createdAt),n.R7$(2),n.JRh(s.content)}}function I(e,C){}function S(e,C){1&e&&n.Z7z(0,v,8,3,"div",1,w,!1,I,0,0),2&e&&n.Dyx(C)}let L=(()=>{class e{offset=0;limit=1;newsFeedService=(0,n.WQX)(h);destroy$=new _.B;posts$=this.newsFeedService.posts$;onScroll(){this.loadPosts()}ngOnInit(){this.loadPosts()}loadPosts(){this.newsFeedService.getFeed(this.offset,this.limit)}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=n.VBU({type:e,selectors:[["app-news-post-list"]],standalone:!0,features:[n.aNF],decls:3,vars:3,consts:[["tuiCardLarge","","tuiAppearance","floating",1,"news-feed-container",3,"scroll"],["tuiCardLarge","","tuiAppearance","floating"],[1,"post-meta"],["tuiChip",""]],template:function(a,$){if(1&a&&(n.j41(0,"div",0),n.bIt("scroll",function(){return $.onScroll()}),n.DNE(1,S,3,1),n.nI1(2,"async"),n.k0s()),2&a){let O;n.R7$(),n.vxM((O=n.bMT(2,1,$.posts$))?1:-1,O)}},dependencies:[E.MD,E.Jj],changeDetection:0})}return e})(),b=(()=>{class e{http=(0,n.WQX)(M.Qq);logger=(0,n.WQX)(F);getComments(s){return this.http.get(i.GET_POST_COMMENTS(s.toString())).pipe((0,p.W)(a=>(this.logger.error(`Error fetching comments for post ${s}: ${a}`),(0,o.of)([]))))}addComment(s,a){return this.http.post(i.ADD_COMMENT_TO_POST(s.toString()),a).pipe((0,p.W)($=>(this.logger.error(`Error adding comment to post ${s}: ${$}`),(0,o.of)(null))))}updateComment(s,a){return this.http.patch(i.UPDATE_COMMENT(s.toString()),{content:a}).pipe((0,p.W)($=>(this.logger.error(`Error updating comment ${s}: ${$}`),(0,o.of)(null))))}deleteComment(s){return this.http.delete(i.DELETE_COMMENT(s.toString())).pipe((0,p.W)(a=>(this.logger.error(`Error deleting comment ${s}: ${a}`),(0,o.of)(null))))}static \u0275fac=function(a){return new(a||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),A=(()=>{class e{http=(0,n.WQX)(M.Qq);logger=(0,n.WQX)(F);addLike(s){return this.http.post(i.ADD_LIKE_TO_POST(s.toString()),{}).pipe((0,p.W)(a=>(this.logger.error(`Error adding like to post ${s}: ${a}`),(0,o.of)(null))))}removeLike(s,a){return this.http.delete(i.DELETE_LIKE_FROM_POST(s.toString(),a.toString())).pipe((0,p.W)($=>(this.logger.error(`Error removing like ${a} from post ${s}: ${$}`),(0,o.of)(null))))}static \u0275fac=function(a){return new(a||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const N=[{path:"",component:r,children:[{path:"",component:L,children:[{path:":id",component:(()=>{class e{post;newsFeedService=(0,n.WQX)(h);commentService=(0,n.WQX)(b);likeService=(0,n.WQX)(A);route=(0,n.WQX)(g.nX);ngOnInit(){Number(this.route.snapshot.paramMap.get("postId"))}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=n.VBU({type:e,selectors:[["app-news-post"]],standalone:!0,features:[n.aNF],decls:2,vars:0,template:function(a,$){1&a&&(n.j41(0,"p"),n.EFF(1,"news-post works!"),n.k0s())},dependencies:[E.MD],changeDetection:0})}return e})()}]}]}]},282:(y,d,f)=>{d.formatArgs=function g(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;u.splice(1,0,p,"color: inherit");let o=0,c=0;u[0].replace(/%[a-zA-Z%]/g,m=>{"%%"!==m&&(o++,"%c"===m&&(c=o))}),u.splice(c,0,p)},d.save=function n(u){try{u?d.storage.setItem("debug",u):d.storage.removeItem("debug")}catch{}},d.load=function r(){let u;try{u=d.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u},d.useColors=function E(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},d.storage=function _(){try{return localStorage}catch{}}(),d.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],d.log=console.debug||console.log||(()=>{}),y.exports=f(741)(d);const{formatters:M}=y.exports;M.j=function(u){try{return JSON.stringify(u)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}},741:(y,d,f)=>{y.exports=function E(g){function r(t){let i,T,D,l=null;function F(...h){if(!F.enabled)return;const w=F,v=Number(new Date);w.diff=v-(i||v),w.prev=i,w.curr=v,i=v,h[0]=r.coerce(h[0]),"string"!=typeof h[0]&&h.unshift("%O");let S=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(b,A)=>{if("%%"===b)return"%";S++;const R=r.formatters[A];return"function"==typeof R&&(b=R.call(w,h[S]),h.splice(S,1),S--),b}),r.formatArgs.call(w,h),(w.log||r.log).apply(w,h)}return F.namespace=t,F.useColors=r.useColors(),F.color=r.selectColor(t),F.extend=_,F.destroy=r.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==l?l:(T!==r.namespaces&&(T=r.namespaces,D=r.enabled(t)),D),set:h=>{l=h}}),"function"==typeof r.init&&r.init(F),F}function _(t,i){const l=r(this.namespace+(typeof i>"u"?":":i)+t);return l.log=this.log,l}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function c(t){return t instanceof Error?t.stack||t.message:t},r.disable=function u(){const t=[...r.names.map(o),...r.skips.map(o).map(i=>"-"+i)].join(",");return r.enable(""),t},r.enable=function M(t){let i;r.save(t),r.namespaces=t,r.names=[],r.skips=[];const l=("string"==typeof t?t:"").split(/[\s,]+/),T=l.length;for(i=0;i<T;i++)l[i]&&("-"===(t=l[i].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.slice(1)+"$")):r.names.push(new RegExp("^"+t+"$")))},r.enabled=function p(t){if("*"===t[t.length-1])return!0;let i,l;for(i=0,l=r.skips.length;i<l;i++)if(r.skips[i].test(t))return!1;for(i=0,l=r.names.length;i<l;i++)if(r.names[i].test(t))return!0;return!1},r.humanize=f(3244),r.destroy=function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(g).forEach(t=>{r[t]=g[t]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function n(t){let i=0;for(let l=0;l<t.length;l++)i=(i<<5)-i+t.charCodeAt(l),i|=0;return r.colors[Math.abs(i)%r.colors.length]},r.enable(r.load()),r}},3244:y=>{var d=1e3,f=60*d,E=60*f,g=24*E,n=7*g;function p(o,c,m,t){var i=c>=1.5*m;return Math.round(o/m)+" "+t+(i?"s":"")}y.exports=function(o,c){c=c||{};var m=typeof o;if("string"===m&&o.length>0)return function _(o){if(!((o=String(o)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(c){var m=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*m;case"weeks":case"week":case"w":return m*n;case"days":case"day":case"d":return m*g;case"hours":case"hour":case"hrs":case"hr":case"h":return m*E;case"minutes":case"minute":case"mins":case"min":case"m":return m*f;case"seconds":case"second":case"secs":case"sec":case"s":return m*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}(o);if("number"===m&&isFinite(o))return c.long?function u(o){var c=Math.abs(o);return c>=g?p(o,c,g,"day"):c>=E?p(o,c,E,"hour"):c>=f?p(o,c,f,"minute"):c>=d?p(o,c,d,"second"):o+" ms"}(o):function M(o){var c=Math.abs(o);return c>=g?Math.round(o/g)+"d":c>=E?Math.round(o/E)+"h":c>=f?Math.round(o/f)+"m":c>=d?Math.round(o/d)+"s":o+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}}}]);